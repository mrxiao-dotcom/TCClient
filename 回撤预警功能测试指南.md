# 回撤预警功能测试指南

## 测试环境准备

### 1. 启动应用程序
```bash
cd TCClient
dotnet run
```

### 2. 打开回撤预警窗口
- 在主窗口菜单栏选择"统计分析"
- 点击"回撤预警"菜单项
- 确认回撤预警窗口正常打开

## 界面测试

### 1. 窗口布局测试
- ✅ 确认窗口标题为"回撤预警监控"
- ✅ 确认窗口尺寸为1400×800像素
- ✅ 确认上下分屏布局正确显示
- ✅ 确认每个面板都有三列：监控列表、数据展示、K线图

### 2. 上涨回撤监控面板测试
- ✅ 确认标题显示"📈 上涨回撤监控（做多风险）"
- ✅ 确认背景色为淡绿色主题
- ✅ 确认有"添加合约"和"删除合约"按钮
- ✅ 确认示例数据BTCUSDT正确显示

### 3. 下跌回撤监控面板测试
- ✅ 确认标题显示"📉 下跌回撤监控（做空风险）"
- ✅ 确认背景色为淡橙色主题
- ✅ 确认有"添加合约"和"删除合约"按钮
- ✅ 确认示例数据ETHUSDT正确显示

## 功能测试

### 1. 监控列表功能测试

#### 添加合约测试
1. 点击上涨回撤监控面板的"添加合约"按钮
2. 确认新合约添加到列表中
3. 确认合约显示格式正确（合约名、24h成交额、24h涨幅）
4. 点击下跌回撤监控面板的"添加合约"按钮
5. 确认新合约添加到列表中

#### 删除合约测试
1. 选中监控列表中的一个合约
2. 点击"删除合约"按钮
3. 确认合约从列表中移除
4. 确认数据展示区域清空

#### 颜色编码测试
- ✅ 正涨幅显示红色
- ✅ 负涨幅显示绿色
- ✅ 零涨幅显示灰色

### 2. 数据展示功能测试

#### 做多监控数据测试
1. 点击上涨回撤监控列表中的BTCUSDT
2. 确认右侧数据展示区域显示以下信息：
   - ✅ 合约代码：BTCUSDT
   - ✅ 最近最高价（红色显示）
   - ✅ 最高价时间
   - ✅ 最大回撤（红色加粗）
   - ✅ 当前回撤（橙色）
   - ✅ 最大回撤分钟数
   - ✅ 当前回撤分钟数

#### 做空监控数据测试
1. 点击下跌回撤监控列表中的ETHUSDT
2. 确认右侧数据展示区域显示以下信息：
   - ✅ 合约代码：ETHUSDT
   - ✅ 最近最低价（绿色显示）
   - ✅ 最低价时间
   - ✅ 最大回撤（红色加粗）
   - ✅ 当前回撤（橙色）
   - ✅ 最大回撤分钟数
   - ✅ 当前回撤分钟数

### 3. K线图显示测试

#### 双击触发测试
1. 双击上涨回撤监控列表中的BTCUSDT
2. 确认右侧K线图区域显示4个图表：
   - ✅ BTCUSDT - 日线
   - ✅ BTCUSDT - 1小时线
   - ✅ BTCUSDT - 15分钟线
   - ✅ BTCUSDT - 5分钟线
3. 确认图表布局为2×2网格

#### 切换合约测试
1. 双击下跌回撤监控列表中的ETHUSDT
2. 确认K线图切换为ETHUSDT的4个周期图表
3. 确认图表标题正确更新

## 数据更新测试

### 1. 实时数据更新测试
- 等待5秒，观察24h成交额和涨幅是否更新
- 等待60秒，观察回撤数据是否更新
- 确认数据更新不影响界面操作

### 2. 回撤计算测试

#### 做多回撤计算验证
- 观察BTCUSDT的当前回撤值
- 确认回撤为负值（价格低于最高价）
- 确认回撤百分比计算正确

#### 做空回撤计算验证
- 观察ETHUSDT的当前回撤值
- 确认回撤为正值（价格高于最低价）
- 确认回撤百分比计算正确

## 性能测试

### 1. 多合约监控测试
1. 添加5个以上合约到监控列表
2. 观察系统响应速度
3. 确认数据更新不卡顿
4. 确认内存使用合理

### 2. 长时间运行测试
1. 保持回撤预警窗口运行30分钟以上
2. 观察是否有内存泄漏
3. 确认定时器正常工作
4. 确认数据持续更新

## 错误处理测试

### 1. 网络异常测试
1. 断开网络连接
2. 观察系统是否正常处理网络异常
3. 恢复网络连接
4. 确认数据更新恢复正常

### 2. 异常数据测试
1. 观察系统对异常数据的处理
2. 确认不会因为数据异常而崩溃
3. 确认错误日志正确记录

## 窗口管理测试

### 1. 多窗口测试
1. 打开多个回撤预警窗口
2. 确认每个窗口独立工作
3. 确认窗口切换器正确显示
4. 确认窗口关闭正常

### 2. 父子窗口关系测试
1. 确认回撤预警窗口的Owner设置正确
2. 关闭主窗口时确认子窗口也关闭
3. 确认窗口层级关系正确

## 用户体验测试

### 1. 操作流畅性测试
- ✅ 按钮点击响应及时
- ✅ 列表选择操作流畅
- ✅ 双击操作响应正确
- ✅ 窗口拖拽和调整大小正常

### 2. 视觉效果测试
- ✅ 颜色搭配合理
- ✅ 字体大小适中
- ✅ 布局美观整洁
- ✅ 图标显示正确

## 兼容性测试

### 1. 分辨率测试
- 在不同分辨率下测试窗口显示
- 确认界面元素不重叠
- 确认文字清晰可读

### 2. 系统兼容性测试
- 在Windows 10/11上测试
- 确认.NET 9.0运行时兼容性
- 确认WPF界面正常显示

## 测试结果记录

### 通过的测试项
- [ ] 界面布局正确
- [ ] 功能操作正常
- [ ] 数据更新及时
- [ ] 性能表现良好
- [ ] 错误处理完善

### 发现的问题
1. **问题描述**：
   - 问题现象：
   - 重现步骤：
   - 预期结果：
   - 实际结果：

2. **问题描述**：
   - 问题现象：
   - 重现步骤：
   - 预期结果：
   - 实际结果：

### 改进建议
1. **界面优化**：
2. **功能增强**：
3. **性能优化**：
4. **用户体验**：

## 测试总结

### 整体评价
- 功能完整性：⭐⭐⭐⭐⭐
- 界面美观度：⭐⭐⭐⭐⭐
- 操作便利性：⭐⭐⭐⭐⭐
- 性能表现：⭐⭐⭐⭐⭐
- 稳定性：⭐⭐⭐⭐⭐

### 测试结论
回撤预警功能基本满足设计要求，可以投入使用。建议在实际使用中继续收集用户反馈，持续优化功能体验。 