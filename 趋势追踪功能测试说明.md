# 趋势追踪功能测试说明

## 功能概述
趋势追踪功能已成功集成到TCClient应用程序中，提供策略跟踪和净值分析功能。

## 功能特性
- ✅ 独立数据库连接（45.153.131.217:3306，数据库：localdb）
- ✅ 自动刷新机制（每小时3分和33分执行）
- ✅ 产品组合管理和合约列表显示
- ✅ 净值曲线图表绘制
- ✅ 双击交互操作
- ✅ 完整的MVVM架构和依赖注入

## 测试步骤

### 1. 访问功能
1. 启动TCClient应用程序
2. 在主菜单中找到"统计分析"菜单
3. 点击"趋势追踪" → "策略跟踪"

### 2. 界面布局验证
确认窗口包含以下区域：
- **工具栏**：刷新按钮、状态信息、加载指示器
- **左侧**：产品组合列表（300px宽）
- **中间**：组合内合约列表（250px宽）
- **右侧**：净值曲线图表区域
  - 上半部分：组合净值曲线图
  - 下半部分：合约净值曲线图
- **状态栏**：统计信息显示

### 3. 数据加载测试
1. **初始加载**：窗口打开时自动加载产品组合数据
2. **手动刷新**：点击"刷新数据"按钮
3. **状态显示**：观察状态消息和加载指示器

### 4. 交互功能测试
1. **选择组合**：
   - 在左侧产品组合列表中单击选择一个组合
   - 验证中间的合约列表是否自动更新
   - 验证上方的组合净值曲线图是否显示

2. **选择合约**：
   - 在中间的合约列表中单击选择一个合约
   - 验证下方的合约净值曲线图是否显示

### 5. 自动刷新测试
- 功能会在每小时的3分和33分自动刷新数据
- 可以通过修改系统时间到这些时间点进行测试
- 或者等待自然时间到达刷新点

### 6. 图表功能测试
1. **组合净值图表**：
   - 显示选中组合的净值变化曲线
   - 包含坐标轴、数据点、折线
   - 时间轴格式：MM-dd HH:mm

2. **合约净值图表**：
   - 显示选中合约的净值变化曲线
   - 包含坐标轴、数据点、折线
   - 动态标题显示合约名称

## 数据库配置
- **服务器**：45.153.131.217:3306
- **用户名**：root
- **密码**：Xj774913@
- **数据库**：localdb
- **主要表**：
  - `product_groups`：产品组合信息
  - `stratage_detail_gate`：策略详情数据

## 故障排除

### 常见问题
1. **数据库连接失败**
   - 检查网络连接
   - 验证数据库服务器是否可访问
   - 确认用户名密码正确

2. **数据不显示**
   - 检查数据库表是否存在数据
   - 查看应用程序日志获取详细错误信息

3. **图表不显示**
   - 确认已选择产品组合和合约
   - 检查净值数据是否存在

### 日志查看
应用程序会记录详细的操作日志，包括：
- 数据库连接状态
- 数据加载过程
- 错误信息和异常

## 技术实现
- **架构**：MVVM模式 + 依赖注入
- **数据库**：MySQL + MySqlConnector
- **UI框架**：WPF + Canvas图表绘制
- **定时器**：DispatcherTimer实现自动刷新
- **异步操作**：async/await模式

## 后续优化建议
1. 添加更多图表类型（柱状图、饼图等）
2. 支持数据导出功能
3. 添加时间范围筛选
4. 优化图表性能和交互体验
5. 添加数据缓存机制

---
**测试完成后，请反馈任何发现的问题或改进建议。** 