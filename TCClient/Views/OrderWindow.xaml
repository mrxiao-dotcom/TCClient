<Window x:Class="TCClient.Views.OrderWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TCClient.Utils"
        Title="下单窗口" Height="600" Width="500" WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <local:PercentToDecimalConverter x:Key="PercentToDecimalConverter"/>
    </Window.Resources>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <!-- 合约信息区 -->
        <GroupBox Header="合约信息" Grid.Row="0" Margin="0,0,0,10">
            <StackPanel Orientation="Vertical" Margin="10">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock Text="合约名称：" VerticalAlignment="Center" Width="70"/>
                    <TextBox Width="150" Text="{Binding ContractName, UpdateSourceTrigger=PropertyChanged}"/>
                    <Button Content="查询" Command="{Binding QueryContractCommand}" Margin="10,0,0,0" Width="60"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock Text="最新价格：" Width="70"/>
                    <TextBlock Text="{Binding LatestPrice}" Width="100"/>
                    <TextBlock Text="最大杠杆：" Width="70"/>
                    <TextBlock Text="{Binding MaxLeverage}" Width="60"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock Text="最小交易金额：" Width="90"/>
                    <TextBlock Text="{Binding MinTradeAmount}" Width="80"/>
                    <TextBlock Text="最小交易单元：" Width="90"/>
                    <TextBlock Text="{Binding MinTradeUnit}" Width="80"/>
                </StackPanel>
            </StackPanel>
        </GroupBox>
        <!-- 推仓信息区 -->
        <GroupBox Header="推仓信息" Grid.Row="1" Margin="0,0,0,10">
            <StackPanel Margin="10">
                <TextBlock Text="当前推仓状态："/>
                <TextBlock Text="{Binding CurrentPositionStatus}" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBlock Text="关联订单："/>
                <DataGrid ItemsSource="{Binding RelatedOrders}" AutoGenerateColumns="False" Height="100" Margin="0,5,0,0">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="订单号" Binding="{Binding OrderId}" Width="*"/>
                        <DataGridTextColumn Header="方向" Binding="{Binding Direction}" Width="60"/>
                        <DataGridTextColumn Header="状态" Binding="{Binding Status}" Width="80"/>
                        <DataGridTextColumn Header="开仓价" Binding="{Binding OpenPrice}" Width="80"/>
                        <DataGridTextColumn Header="平仓价" Binding="{Binding ClosePrice}" Width="80"/>
                    </DataGrid.Columns>
                </DataGrid>
            </StackPanel>
        </GroupBox>
        <!-- 下单区 -->
        <GroupBox Header="下单" Grid.Row="2">
            <StackPanel Margin="10">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock Text="数量：" Width="50"/>
                    <TextBox Width="80" Text="{Binding OrderQuantity}"/>
                    <TextBlock Text="杠杆率：" Width="60" Margin="10,0,0,0"/>
                    <TextBox Width="80" Text="{Binding Leverage}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock Text="止损比例：" Width="70"/>
                    <TextBox Width="80" Text="{Binding StopLossRatio, Converter={StaticResource PercentToDecimalConverter}}"/>
                    <TextBlock Text="方向：" Width="50" Margin="10,0,0,0"/>
                    <ComboBox Width="80" SelectedItem="{Binding OrderDirection}">
                        <ComboBoxItem Content="多"/>
                        <ComboBoxItem Content="空"/>
                    </ComboBox>
                </StackPanel>
                <Button Content="下单" Command="{Binding PlaceOrderCommand}" Height="35" Margin="0,10,0,0"/>
            </StackPanel>
        </GroupBox>
    </Grid>
</Window> 