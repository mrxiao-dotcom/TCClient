# 推送功能使用指南 📱

## 🎯 快速开始

### 1. 启动应用
```bash
# 在项目目录运行
dotnet run --project TCClient
```

### 2. 打开推送配置
1. 启动应用后，点击"市场总览"菜单
2. 在市场总览页面点击"推送配置"按钮（绿色按钮）

### 3. 获取虾推啥Token
1. 访问：https://xtuis.cn/
2. 注册账号并获取你的Token
3. **重要**：只复制Token部分，不要包含完整URL

### 4. 配置推送
1. ✅ 勾选"开启推送功能"
2. 📝 在Token输入框中输入你的Token，点击"添加"
3. ⚙️ 设置每日推送限制（建议：5次）
4. ⏰ 设置推送间隔（建议：240分钟 = 4小时）

### 5. 测试推送
1. 点击"发送测试消息"按钮
2. 系统会自动进行详细测试：
   - 🌐 网络连接测试
   - 📡 多种API格式测试
   - 📊 生成详细测试报告
3. 如果成功，保存配置

## ✨ 新功能亮点

### 🔧 智能API测试
- **多格式支持**：自动尝试JSON、GET、表单三种API格式
- **网络检测**：自动检测网络连接状态
- **详细报告**：生成完整的测试报告，帮助诊断问题

### 📊 详细测试报告
当推送测试失败时，系统会显示详细报告：
```
=== 虾推啥API测试报告 ===
Token: XT123456789
测试时间: 2024-01-15 14:30:00
总体结果: ✅ 成功

详细测试结果:
  网络连接: ✅ 网络测试
    状态码: 200
    响应: 网络连接正常
  JSON格式: ❌ POST JSON
    状态码: 404
    错误: Token不存在
  GET格式: ✅ GET
    状态码: 200
    响应: 推送成功
  表单格式: ❌ POST Form
    状态码: 404

建议:
✅ GET格式工作正常，将使用此格式
```

### 🔄 10分钟自动刷新
- 市场总览页面每10分钟自动刷新数据
- 保持市场信息实时更新

### ⏰ 智能定时推送
- 根据配置的时间间隔自动推送
- 智能分析市场涨跌幅数据
- 自动生成结构化的市场报告

## 📋 推送消息格式

### 市场分析报告示例
```
📊 市场分析报告 - 2024-01-15 14:30
━━━━━━━━━━━━━━━━━━━━
📈 涨幅分析:
🔥 当天和30天共涨 (5个):
  BTCUSDT: 当天+5.20%, 30天+12.80%
  ETHUSDT: 当天+3.10%, 30天+8.40%
  BNBUSDT: 当天+2.80%, 30天+15.60%
  ADAUSDT: 当天+4.20%, 30天+9.30%
  DOGEUSDT: 当天+6.10%, 30天+22.40%

⚡ 仅当天上涨 (3个):
  SOLUSDT: +3.50%
  MATICUSDT: +2.90%
  LINKUSDT: +1.80%

📊 仅30天上涨 (2个):
  XRPUSDT: +8.20%
  DOTUSDT: +5.60%

📉 跌幅分析:
❄️ 当天和30天共跌 (3个):
  AVAXUSDT: 当天-2.10%, 30天-5.60%
  ATOMUSDT: 当天-1.80%, 30天-3.20%
  ALGOUSDT: 当天-3.40%, 30天-8.90%

⚡ 仅当天下跌 (2个):
  FILUSDT: -2.20%
  ICPUSDT: -1.60%

📊 仅30天下跌 (1个):
  LTCUSDT: -4.30%
━━━━━━━━━━━━━━━━━━━━
📊 总计: 128 个合约
```

## 🔧 故障排除

### 推送失败常见问题

#### 1. Token格式错误 ❌
**错误示例：**
```
https://xtuis.cn/XT123456789  ❌ 包含URL
xtuis.cn/XT123456789         ❌ 包含域名
```

**正确示例：**
```
XT123456789                  ✅ 只有Token
```

#### 2. 网络连接问题 🌐
- 检查能否访问 https://xtuis.cn/
- 确认防火墙/杀毒软件没有阻止连接
- 公司网络可能需要代理设置

#### 3. 虾推啥服务问题 📡
- 查看虾推啥官方状态
- 尝试重新生成Token
- 联系虾推啥客服

### 手动测试方法

#### 浏览器测试
```
https://xtuis.cn/你的Token?text=测试消息
```

#### 命令行测试
```bash
# Windows PowerShell
Invoke-RestMethod "https://xtuis.cn/你的Token?text=测试消息"

# Linux/Mac
curl "https://xtuis.cn/你的Token?text=测试消息"
```

## ⚙️ 高级配置

### 推送频率建议
- **日内交易者**：2-4小时推送一次
- **波段交易者**：6-8小时推送一次
- **长线投资者**：12-24小时推送一次

### 多Token配置
- 可添加多个Token实现群发
- 支持不同设备/平台同时接收
- 每个Token独立测试和验证

### 推送限制管理
- 默认每日推送5次
- 可根据需要调整1-20次
- 超出限制自动停止推送

## 📈 使用效果

### 实时性
- ✅ 10分钟数据刷新
- ✅ 智能市场分析
- ✅ 及时推送提醒

### 便捷性
- ✅ 一键配置
- ✅ 自动运行
- ✅ 免人工干预

### 可靠性
- ✅ 多种API格式支持
- ✅ 网络异常重试
- ✅ 详细错误诊断

## 🎉 总结

推送功能现已完全集成到市场总览页面，提供：

1. **智能API测试** - 自动适配最佳推送方式
2. **详细诊断报告** - 快速定位问题
3. **自动化推送** - 无需人工干预
4. **市场分析** - 专业的投资参考

配置完成后，你将拥有一个24/7运行的智能市场分析推送系统！🚀

---

💡 **提示：** 如果遇到问题，请查看详细测试报告中的建议，或参考"虾推啥API调试指南.md"获取更多帮助。 