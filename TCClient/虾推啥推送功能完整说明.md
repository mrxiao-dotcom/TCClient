# 虾推啥推送功能完整说明 📱

## 🎯 功能概述

基于虾推啥官方API实现的智能市场分析推送系统，严格遵循官方使用规则和限制。

### ✨ 核心特性
- 📊 智能市场分析：自动分析当天和30天涨跌幅数据
- 🔄 10分钟自动刷新：市场总览页面自动更新
- ⏰ 智能定时推送：可配置推送间隔和频率
- 🛡️ 官方API兼容：完全按照虾推啥官方文档实现
- 📈 多Token支持：支持群发到多个设备
- 🔧 智能限流：严格遵循官方限制规则

## 📋 虾推啥官方限制

根据虾推啥官方文档 (https://xtuis.cn/)，系统严格遵循以下限制：

### 推送限制
| 限制类型 | 官方限制 | 系统设置 | 说明 |
|---------|---------|---------|------|
| 每日推送上限 | 300条 | 20条 | 保守设置，避免超限 |
| 每分钟推送上限 | 10条 | 8条 | 留有余量，确保稳定 |
| 单IP每日请求上限 | 5000次 | 自动控制 | 系统自动管理请求频率 |

### API格式
系统按优先级尝试以下官方API格式：

1. **GET格式 (推荐)**
   ```
   https://wx.xtuis.cn/TOKEN.send?text=标题&desp=内容
   ```

2. **POST格式**
   ```
   POST https://wx.xtuis.cn/TOKEN.send
   Content-Type: application/x-www-form-urlencoded
   Body: text=标题&desp=内容
   ```

3. **备用格式**
   ```
   https://xtuis.cn/TOKEN?text=消息
   ```

## 🚀 快速开始

### 1. 获取虾推啥Token
1. 微信扫码关注"虾推啥"公众号
2. 关注后自动收到Token
3. **重要**：只复制Token部分，不要包含URL

**正确Token格式示例：**
```
✅ BQGgzRQfJhEgTt7A7WQCERiVi
✅ XT123456789
✅ ABC123DEF456
```

**错误格式示例：**
```
❌ https://xtuis.cn/BQGgzRQfJhEgTt7A7WQCERiVi
❌ xtuis.cn/BQGgzRQfJhEgTt7A7WQCERiVi
```

### 2. 启动应用
```bash
# 在项目目录运行
dotnet run --project TCClient
```

### 3. 配置推送
1. 打开"市场总览"页面
2. 点击"推送配置"按钮
3. 添加Token并配置参数：
   - ✅ 勾选"开启推送功能"
   - 📝 添加虾推啥Token
   - 🔢 设置每日推送限制（建议：10-20次）
   - ⏰ 设置推送间隔（建议：360分钟 = 6小时）

### 4. 测试推送
1. 点击"发送测试消息"
2. 系统自动进行多格式测试
3. 查看详细测试报告
4. 确认推送成功后保存配置

## 📊 推送消息格式

### 市场分析报告示例
```
📊 市场分析报告 - 2024-01-15 14:30
━━━━━━━━━━━━━━━━━━━━
📈 涨幅分析:
🔥 当天和30天共涨 (5个):
  BTCUSDT: 当天+5.20%, 30天+12.80%
  ETHUSDT: 当天+3.10%, 30天+8.40%
  BNBUSDT: 当天+2.80%, 30天+15.60%
  ADAUSDT: 当天+4.20%, 30天+9.30%
  DOGEUSDT: 当天+6.10%, 30天+22.40%

⚡ 仅当天上涨 (3个):
  SOLUSDT: +3.50%
  MATICUSDT: +2.90%
  LINKUSDT: +1.80%

📊 仅30天上涨 (2个):
  XRPUSDT: +8.20%
  DOTUSDT: +5.60%

📉 跌幅分析:
❄️ 当天和30天共跌 (3个):
  AVAXUSDT: 当天-2.10%, 30天-5.60%
  ATOMUSDT: 当天-1.80%, 30天-3.20%
  ALGOUSDT: 当天-3.40%, 30天-8.90%

⚡ 仅当天下跌 (2个):
  FILUSDT: -2.20%
  ICPUSDT: -1.60%

📊 仅30天下跌 (1个):
  LTCUSDT: -4.30%
━━━━━━━━━━━━━━━━━━━━
📊 总计: 128 个合约
```

## ⚙️ 系统配置详解

### 推送配置参数

| 参数 | 默认值 | 范围 | 说明 |
|------|--------|------|------|
| 每日推送限制 | 20次 | 1-50次 | 建议不超过20次，避免超过官方限制 |
| 推送间隔 | 360分钟 | 60-1440分钟 | 6小时间隔，适合大多数用户 |
| Token数量 | 无限制 | 1-10个 | 支持多设备接收 |

### 推送频率建议

| 用户类型 | 推送间隔 | 每日次数 | 适用场景 |
|----------|----------|----------|----------|
| 日内交易者 | 120-240分钟 | 8-12次 | 频繁交易，需要及时信息 |
| 波段交易者 | 360-480分钟 | 4-6次 | 中期持仓，适度关注 |
| 长线投资者 | 720-1440分钟 | 1-3次 | 长期投资，偶尔查看 |

## 🔧 故障排除

### 常见问题及解决方案

#### 1. 推送失败 - 404错误
**原因：** Token不存在或格式错误
**解决：**
1. 确认Token格式正确（不包含URL）
2. 重新从虾推啥公众号获取Token
3. 使用浏览器测试：`https://wx.xtuis.cn/你的Token.send?text=测试`

#### 2. 推送失败 - 网络错误
**原因：** 网络连接问题
**解决：**
1. 检查网络连接
2. 确认防火墙设置
3. 尝试访问 https://xtuis.cn/ 确认网站可达

#### 3. 推送频率过高
**原因：** 超过每分钟10条限制
**解决：**
1. 增加推送间隔时间
2. 减少每日推送次数
3. 系统会自动限流，等待后重试

#### 4. Token被冻结
**原因：** 违反使用规则
**解决：**
1. 检查推送内容是否合规
2. 确认未超过每日限制
3. 联系虾推啥客服：weixin@xtuis.cn

### 手动测试方法

#### 浏览器测试（推荐）
```
https://wx.xtuis.cn/你的Token.send?text=测试标题&desp=测试内容
```

#### PowerShell测试
```powershell
Invoke-RestMethod "https://wx.xtuis.cn/你的Token.send?text=测试标题&desp=测试内容"
```

#### curl测试
```bash
curl "https://wx.xtuis.cn/你的Token.send?text=测试标题&desp=测试内容"
```

## 📈 使用效果

### 智能分析
- 🔥 自动识别热门上涨品种
- ❄️ 及时发现下跌风险
- 📊 三组分类清晰明了
- ⏰ 定时推送不遗漏

### 系统优势
- ✅ **官方兼容**：严格按照官方API实现
- ✅ **智能限流**：自动遵循所有使用限制
- ✅ **多格式支持**：自动选择最佳API格式
- ✅ **详细日志**：完整的调试和错误信息
- ✅ **容错机制**：网络异常自动重试
- ✅ **配置灵活**：支持多种使用场景

## 🔒 安全提醒

### Token安全
- 🔐 **严格保密**：不要在公开场所分享Token
- 🔄 **定期更换**：建议定期重新生成Token
- 👥 **避免共享**：每个用户使用独立Token

### 合规使用
- 📝 **内容合规**：确保推送内容合法合规
- 📊 **频率控制**：严格遵循推送限制
- 🚫 **禁止滥用**：不要用于垃圾信息推送

## 📞 技术支持

### 应用相关问题
- 📧 查看应用日志文件
- 🔧 使用内置调试工具
- 📋 参考详细测试报告

### 虾推啥服务问题
- 📧 官方邮箱：weixin@xtuis.cn
- 🌐 官方网站：https://xtuis.cn/
- 📱 微信公众号：虾推啥

## 🎉 总结

虾推啥推送功能现已完全集成，提供：

1. **智能市场分析** - 专业的投资参考数据
2. **官方API兼容** - 完全遵循官方规范
3. **智能限流控制** - 自动遵循所有限制
4. **详细错误诊断** - 快速定位和解决问题
5. **多设备支持** - 支持群发到多个设备
6. **24/7自动运行** - 无需人工干预

配置完成后，你将拥有一个完全自动化、合规稳定的智能市场分析推送系统！🚀

---

💡 **提示：** 首次使用建议先进行手动测试，确认Token正确后再启用自动推送功能。 